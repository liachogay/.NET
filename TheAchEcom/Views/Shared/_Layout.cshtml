@using Repository.DomainModels
@using Repository.BusinessModels
@using Repository.BusinessModels.ShopList;
@inject Microsoft.AspNetCore.Identity.SignInManager<Customer> signInManager;
@inject Microsoft.AspNetCore.Identity.UserManager<Customer> userManager;
@{ var repository = new EcomRepository();
   var options = (ShopListOptions)ViewBag.Options ?? new ShopListOptions(); }

<!DOCTYPE html>
<html amp lang="en">
<head>
   <meta charset="utf-8">
   <script async src="https://cdn.ampproject.org/v0.js"></script>

   <link rel="canonical" href="https://theachecommercehcmue.azurewebsites.net/Product/ProductDetail/quan-ngan-nu">

   <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="preconnect" href="https://www.google-analytics.com" />
   <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500&display=swap" rel="stylesheet">
   <link rel="stylesheet" href="~/css/site.css">
   <link rel="stylesheet" href="~/css/cart-detail.css">
   <link rel="stylesheet" href="~/css/product-detail-style.css">
   <link rel="stylesheet" href="~/css/shop-list.css">
   <meta name="keywords" content="quần áo, shop, shop rẻ, quần áo đẹp, quần áo nam nữ">

   <meta name="twitter:card" content="summary">
   <meta name="twitter:url" content="https://theachecommercehcmue.azurewebsites.net/Product/ProductDetail/quan-ngan-nam">
   <meta name="twitter:url" content="https://theachecommercehcmue.azurewebsites.net/Product/ProductDetail/ao-nam">
   <meta name="twitter:url" content="https://theachecommercehcmue.azurewebsites.net/Product/ProductDetail/vay-nu">


   <meta name="twitter:title" content="Another Online Store">
   <meta name="twitter:description" content="Quần áo chất lượng nhất việt nam,không ai sánh bằng,hãy đến với shop chung tôi quần áo thuộc chuẩn mỹ tho và các đồ vật thêu dệt nên được xuất xứ từ mỹ đình nha mọi người ơi!">
   <meta name="twitter:image" content="https://theachecommercehcmue.azurewebsites.net/product_img/quanngannam.jfif">
   <meta name="twitter:image" content="https://theachecommercehcmue.azurewebsites.net/product_img/aophongnam.jfif">
   <meta name="twitter:image" content="https://theachecommercehcmue.azurewebsites.net/product_img/vaynu.jfif">
   <meta name="description" content="Quần áo chất lượng nhất việt nam,không ai sánh bằng,hãy đến với shop chung tôi quần áo thuộc chuẩn mỹ tho và các đồ vật thêu dệt nên được xuất xứ từ mỹ đình nha mọi người ơi!">

   <meta name="title" property="og:title" content="999Shop HMCUE" />
   <meta name="type" property="og:type" content="article" />
   <meta name="url" property="og:url" content="" />

   <meta name="title" property="og:title" content="999Shop">
   <meta name="image" property="og:image" style="height:auto; width:auto;" content="https://theachecommercehcmue.azurewebsites.net/Product/ProductDetail/quan-ngan-nam">
   <meta name="image" property="og:image" style="height:auto; width:auto;" content="https://theachecommercehcmue.azurewebsites.net/Product/ProductDetail/quan-dai-nam">
   <meta name="image" property="og:image" style="height:auto; width:auto;" content="https://theachecommercehcmue.azurewebsites.net/Product/ProductDetail/vay-nu">

   <meta name="mata" property=og:mata content="">

   <title>999shop hcmue</title>

   <script async src="https://cdn.ampproject.org/v0.js"></script>

   <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async src="https://www.googletagmanager.com/gtag/js?id=UA-183077355-1"></script>
   <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());

      gtag('config', 'UA-183077355-1');
   </script>
   <!-- Load AMP -->
   <script async src="https://cdn.ampproject.org/v0.js"></script>

   <!-- Load amp-analytics -->
   <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
   <amp-analytics type="googleanalytics" id="analyticsl" data-credentials="include">
      <script type="application/json">
         {"vars" : {"account":"UA-183077355-1","anonynuzeIP":"set"},"triggers":{"trackPageview":{"on":"visible","request":"pageview"}}}
      </script>
   </amp-analytics>
</head>
<body>
   <!--Start of Tawk.to Script-->
   <script type="text/javascript">
      var Tawk_API = Tawk_API || {}, Tawk_LoadStart = new Date();
      (function () {
         var s1 = document.createElement("script"), s0 = document.getElementsByTagName("script")[0];
         s1.async = true;
         s1.src = 'https://embed.tawk.to/5faf4407c52f660e89735cf7/default';
         s1.charset = 'UTF-8';
         s1.setAttribute('crossorigin', '*');
         s0.parentNode.insertBefore(s1, s0);
      })();
   </script>

   <!--End of Tawk.to Script-->
   <!-- Load Facebook SDK for JavaScript -->
   <div id="fb-root"></div>
   <script>
      window.fbAsyncInit = function () {
         FB.init({
            xfbml: true,
            version: 'v9.0'
         });
      };

      (function (d, s, id) {
         var js, fjs = d.getElementsByTagName(s)[0];
         if (d.getElementById(id)) return;
         js = d.createElement(s); js.id = id;
         js.src = 'https://connect.facebook.net/en_US/sdk/xfbml.customerchat.js';
         fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));</script>

   <!-- Your Chat Plugin code -->
   <div class="fb-customerchat"
        attribution=setup_tool
        page_id="103593178237509"
        theme_color="#ff5ca1"
        logged_in_greeting="Welcome to 999Shop"
        logged_out_greeting="Welcome to 999Shop">
   </div>



   <!-- #Header  -->
   <div id="header_section">
      <a id="app_logo" class="no_deco" href="/" style="position:relative">
         <div style="font-size: 1.2rem;font-weight:500;
        padding: 2.5rem 1rem 1rem 1rem;
        background-color: white;
      ">
            THE.ACH
         </div>
      </a>

      <div class="nav_bar">
         @{ IEnumerable<Category> parentCategories = repository.GetParentCategories();
            var currentCategory = repository.GetCategoryById(options.CategoryId);
            var currentCategoryId = (currentCategory != null) ?
                (int?)currentCategory.Id : null; }
         @foreach (var item in parentCategories)
         {
            var isActive = (currentCategoryId == item.Id) ? "active" : "";
            <a class="nav_item clickable @isActive hover_active" href="~/Shop/ShopList?CategoryId=@item.Id">
               @item.CategoryName
            </a>     }
      </div>

      <div class="controls">
         <div id="app_search">
            <span class="search_trigger" onclick="ToggleInput(this)">
               <img class="small_icon" src="~/icons/search.svg" alt="imgs">
               <input id="search_input" extend_form="#shoplist_form" submit_on_keypress submit_self_only="true"
                      type="text" name="SearchText" value="@( ViewBag.SearchText ?? "" )" placeholder="Search for...">
            </span>
         </div>

         <a id="shop_cart" href="~/ShoppingCart/CartDetail">
            <img class="medium_icon" src="~/icons/shopping-bag.svg" alt="imgs">
            <span class="noti_count" id="cart_counter">
               @( ViewBag.CountCartItems )
            </span>
         </a>

         <div id="user_profile">
            @if (signInManager.IsSignedIn(User))
            {
               string customerId = userManager.GetUserId(User);
               Customer customer = userManager.Users.FirstOrDefault(p => p.Id == customerId);

               <div class="control clickable flex_center" onclick="toggleActive(this)">
                  <span class="user_image_clip">
                     <img class="user_image" src="~/icons/default-user.jpg" alt="imgs">
                  </span>
                  <div class="flex_center">
                     <h3> @customer.UserName </h3>
                     <div class="log_out">
                        <a href="/Customer/LogOut" class="text">Log Out</a>
                     </div>
                  </div>
               </div> }
            else
            {
               <div class="control clickable">
                  <span class="icon">
                     <img class="medium_icon" src="~/icons/user.svg" alt="imgs">
                  </span>
                  <a href="/Customer/Login" class="text"> Sign In </a>
               </div>}
         </div>
      </div>
   </div>

   <!-- #Body -->
   <div id="main_section">
      @RenderBody()
   </div>

   <script src="~/lib/jquery/dist/jquery.min.js"></script>
   <script src="~/js/ExtendForm.js"></script>
   <script>
      const SHOPLIST_FORM = ExtendForm("#shoplist_form");

      function ToggleActive(element) {
         $(element).toggleClass("active");
      }

      function ToggleInput(searchTrigger) {
         var searchInput = $(searchTrigger).find('input').first();
         if ($(searchTrigger).hasClass('active') == false) {
            $(searchInput).on('focusout', () => {
               $(searchTrigger).removeClass('active');
            });
            $(searchTrigger).addClass('active');
            $(searchInput).focus();
         }
      }
   </script>

   @RenderSection("ViewScripts", false)

</body>
</html>
<amp-img alt="imgs" src="https://theachecommercehcmue.azurewebsites.net/Product/ProductDetail/ao-nam" width="150" height="200" layout="responsive"> </amp-img>